<h1 class="text-center">Category Edit</h1>

<div *ngIf="backendErrors.length > 0" class="alert alert-danger">
  <ul class="mb-0">
    <li *ngFor="let error of backendErrors">{{ error }}</li>
  </ul>
</div>

<form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="col-md-6 offset-md-3">
  <div class="mb-3">
    <label for="name" class="form-label">Name</label>
    <input type="text" formControlName="name" class="form-control"
      [class.is-invalid]="categoryForm.get('name')?.touched && categoryForm.get('name')?.invalid" />
    <div class="text-danger" *ngIf="categoryForm.get('name')?.touched && categoryForm.get('name')?.invalid">
      Назва обов’язкова.
    </div>
  </div>

  <div class="mb-3">
    <label for="slug" class="form-label">Slug</label>
    <input type="text" formControlName="slug" class="form-control"
      [class.is-invalid]="categoryForm.get('slug')?.touched && categoryForm.get('slug')?.invalid" />
    <div class="text-danger" *ngIf="categoryForm.get('slug')?.touched && categoryForm.get('slug')?.invalid">
      Слаг обов’язковий.
    </div>
  </div>

  <div class="mb-3">
    <label for="imageFile" class="form-label">Image</label>
    <input type="file" (change)="onFileSelected($event)" class="form-control" id="imageFile">
  </div>

  <div class="mb-3 text-center" *ngIf="imagePreview">
    <img [src]="imagePreview" alt="Preview" style="height: 200px; object-fit: cover; max-width: 100%;">
  </div>



  <button type="submit" class="btn btn-primary w-100" [disabled]="categoryForm.invalid">Update</button>
</form>